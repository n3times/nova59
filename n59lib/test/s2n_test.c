#include <stdio.h>
#include <stdbool.h>
#include <math.h>

#include "n.h"

#define ABS(x)  ( (x) < 0 ? (-x) : (x) )

static void t(char *s) {
  bool err = false;
  n_t n = s2n(s, &err);
  printf("%30s: % 14lld%s%02d%s\n",
         s, n.mant, n.exp < 0 ? "-" : " ", ABS(n.exp), err ? " ?" : "");
}

int main() {
  char s[16];
  for (int i = 0; i < 1; i++) {
    for (int j = -99; j <= 99; j++) {
      sprintf(s, "%lld.%s%02d",
              (long long) pow(10, i), j < 0 ? "-" : " " ,ABS(j));
      t(s);
    }
  }
  printf("\n");
  t("0");
  t("1");
  t("1234567890");
  t("1234567890123");
  t("0.");
  t("123.");
  t("0.0");
  t("0.000");
  t("0.0001");
  t("-0.0001");
  t("1 99");
  t("1-99");
  t("123.456 03");
  t("123.456 3");
  t("123.456-3");
  t("123.456-03");
  t("123.456 100");
  t("123.456-110");
  t("123.456  1");
  t("123.456 -1");
  t(".1 0");
  printf("\n");
  t("0");
  t(".0");
  t("0.");
  t("0.0");
  t("-0");
  t("-.0");
  t("-0.");
  t("-0.0");
  t("00");
  t("0.000000000000000000000000000");
  printf("\n");
  t("1.000000000000000000000000000");
  t("1.000000000000");
  t("1.0000000000000");
  t("1.00000000000000");
  t("1.000000000000000");
  t("1.0000000000000000");
  t("1.00000000000000000");
  t("1.000000000000000000");
  t("1.0000000000000000000");
  t("1.00000000000000000000");
  printf("\n");
  t("1234567890123");
  t(".1234567890123");
  t("12345678901234567890");
  t(".12345678901234567890");
  printf("\n");
  t("1 1234");
  t("1-1234");
  t(".0001 101");
  t("1234567890123-111");
  printf("\n");
  t(".0000000000000000000000000000000000000000000000000000000000000000000000000000000000000123-000");
  t(".0000000000000000000000000000000000000000000000000000000000000000000000000000000000000123-999");
  t(".0000000000000000000000000000000000000000000000000000000000000000000000000000000000123    999");
  t("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
  t("12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901");
  printf("\n");
  t(".");
  t("-");
  t("?");
  t("1..0");
  t("1..0 2");
  t("11..22");
  t("11..22..33");
  t("11 -");
  printf("\n");
  t("1 123456789012348912384902");
  t("0 12345678901234");
  printf("\n");
  t("000.111");
}
