==  To string  == 

// Operand, possibly incomplete.
String operand_as_string(Operand opd)
  type = opd.type
  value = opd.value
  case type:
    LBL: USR:
      assert value.len > 0
      return keys[int(opd.value)].as_string
    D: DD: DDD:
      assert value.len > 0
      return value
    IND:
      return "*" + value
    UNK:
      return ""

// Operation, possibly pending or canceled.
String operation_as_string(Operation opn)
  str = ""

  // Operator.
  opr = opn.operator
  opr.inv: str += "INV "
  opr.code != KEY_UNK: str += keys[opr.code].as_string

  // Operands.
  opr.operands.len > 0: str += " " + operand_as_string(opn.operands[0])
  opr.operands.len > 1: str += " " + operand_as_string(opn.operands[1])

  opn.state == CANCELED: str += " X"
  opn.state == PENDING:  str += "_"

  return str
